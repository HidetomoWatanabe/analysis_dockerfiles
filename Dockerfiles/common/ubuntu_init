# create user
COPY files/root_pass root_pass
RUN echo "root:$(cat root_pass)" | chpasswd && \
  useradd hidetomo && \
  mkdir /home/hidetomo && \
  chown hidetomo:hidetomo /home/hidetomo
COPY files/hidetomo_pass hidetomo_pass
RUN echo "hidetomo:$(cat hidetomo_pass)" | chpasswd

# init apt-get
RUN apt-get -y update

# sudo
RUN apt-get -y install sudo && \
  echo "hidetomo ALL=(ALL) NOPASSWD:ALL" >> /etc/sudoers

# change user and dir
USER hidetomo
WORKDIR /home/hidetomo
ENV HOME /home/hidetomo

# alias
RUN echo "alias ls='ls --color'" >> .bashrc && \
  echo "alias ll='ls -lat'" >> .bashrc

# vim
RUN sudo apt-get -y install vim
COPY files/.vimrc .vimrc
RUN sudo tr \\r \\n <.vimrc> tmp && sudo mv tmp .vimrc && \
  sudo chown hidetomo:hidetomo .vimrc

# share
RUN mkdir share
VOLUME share

# common apt-get
RUN sudo apt-get -y install \
  ntp \
  zip \
  unzip \
  bzip2 \
  gcc \
  g++ \
  cmake \
  git \
  less \
  subversion \
  wget \
  nkf \
  fglrx \
  language-pack-ja-base \
  language-pack-ja \
  xvfb \
  xfonts-100dpi \
  xfonts-75dpi \
  xfonts-scalable \
  xfonts-cyrillic

# LC
RUN echo "export LC_ALL=ja_JP.UTF-8" >> .bashrc
ENV LC_ALL ja_JP.UTF-8

# git config
# RUN git config --global user.email 'attyamunn@gmail.com' && \
#   git config --global user.name 'hidetomo-watanabe'

