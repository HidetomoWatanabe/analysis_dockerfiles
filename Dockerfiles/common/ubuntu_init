# create user
COPY files/root_pass root_pass
RUN echo "root:$(cat root_pass)" | chpasswd && \
  useradd hidetomo && \
  mkdir /home/hidetomo && \
  chown hidetomo:hidetomo /home/hidetomo
COPY files/hidetomo_pass hidetomo_pass
RUN echo "hidetomo:$(cat hidetomo_pass)" | chpasswd

# sudo
RUN apt -y update && \
  apt -y install sudo && \
  echo "hidetomo ALL=(ALL) NOPASSWD:ALL" >> /etc/sudoers

# change user and dir
USER hidetomo
WORKDIR /home/hidetomo
ENV HOME /home/hidetomo

# wget
RUN sudo apt -y update && \
  sudo apt -y install wget

# alias
RUN wget https://raw.githubusercontent.com/hidetomo-watanabe/dotfiles/master/bash/.git-prompt.sh
RUN wget https://raw.githubusercontent.com/hidetomo-watanabe/dotfiles/master/bash/.bash_profile
RUN chmod 600 .bash_profile
RUN echo "source ~/.bash_profile" >> .bashrc

# vim
RUN sudo apt -y update && \
  sudo apt -y install vim
RUN wget https://raw.githubusercontent.com/hidetomo-watanabe/dotfiles/master/vimrc_simple -O .vimrc
RUN sudo tr \\r \\n <.vimrc> tmp && sudo mv tmp .vimrc && \
  sudo chown hidetomo:hidetomo .vimrc

# share
RUN mkdir share
VOLUME share

# tzdata
RUN sudo apt -y update && \
  sudo apt -y install \
    tzdata
ENV TZ Asia/Tokyo

# common apt
RUN sudo apt -y update && \
  sudo apt -y install \
    ntp \
    htop \
    less \
    zip \
    unzip \
    bzip2 \
    gcc \
    g++ \
    cmake \
    git \
    subversion \
    curl \
    nkf \
    language-pack-ja-base \
    language-pack-ja \
    xvfb \
    xfonts-100dpi \
    xfonts-75dpi \
    xfonts-scalable \
    xfonts-cyrillic \
    fonts-takao-*

# LC
RUN echo "export LC_ALL=ja_JP.UTF-8" >> .bashrc
ENV LC_ALL ja_JP.UTF-8

