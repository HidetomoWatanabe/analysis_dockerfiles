# pyenv
RUN git clone https://github.com/yyuu/pyenv.git .pyenv
RUN echo 'export PYENV_ROOT="$HOME/.pyenv"' >> .bashrc
ENV PYENV_ROOT $HOME/.pyenv
RUN echo 'export PATH="$PYENV_ROOT/bin:$PATH"' >> .bashrc
ENV PATH $PYENV_ROOT/bin:$PATH
RUN echo 'eval "$(pyenv init -)"' >> .bashrc
RUN echo 'export PYTHONIOENCODING=utf-8' >> .bashrc

# anaconda
ARG pyVer=anaconda3-4.0.0
# RUN pyenv install -l | grep ana
RUN pyenv install ${pyVer}
RUN pyenv rehash
RUN pyenv global ${pyVer}
RUN echo 'export PATH="$PYENV_ROOT/versions/'${pyVer}'/bin/:$PATH"' >> .bashrc
ENV PATH $PYENV_ROOT/versions/${pyVer}/bin/:$PATH

# common conda or pip
ARG pipVer=9.0.1
ARG openCVVer=3.1.0
ARG seabornVer=0.8.1
ARG sklearnVer=0.19.1
ARG daskVer=0.16.0
ARG flake8Ver=3.5.0
ARG nomklVer=1.0
ARG schemaVer=0.5.0
ARG zenhanVer=0.5.2
RUN conda install -y pip=${pipVer}
RUN conda install -y openCV=${openCVVer}
RUN conda install -y seaborn=${seabornVer}
RUN conda install -y scikit-learn=${sklearnVer}
RUN conda install -y dask=${daskVer}
RUN conda install -y flake8=${flake8Ver}
RUN conda install -y nomkl=${nomklVer}
RUN pip install schema==${schemaVer}
RUN pip install zenhan==${zenhanVer}

# jupyter
ARG jupyterthemesVer=0.17.0
RUN jupyter-notebook --generate-config
RUN echo 'c.NotebookApp.ip = "*"' >> .jupyter/jupyter_notebook_config.py
RUN echo 'c.NotebookApp.open_browser = False' >> .jupyter/jupyter_notebook_config.py
RUN echo 'c.NotebookApp.port = 8888' >> .jupyter/jupyter_notebook_config.py
RUN pip install jupyterthemes==${jupyterthemesVer}
RUN jt -t grade3 -f hack
